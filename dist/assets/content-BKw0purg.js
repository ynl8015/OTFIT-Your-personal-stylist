let g=!1,u=null;chrome.runtime.onMessage.addListener((t,e,n)=>{t.action==="toggleSelect"?(g=!g,console.log(`ğŸŸ¢ ìƒí’ˆ ì„ íƒ ëª¨ë“œ: ${g?"í™œì„±í™”":"ë¹„í™œì„±í™”"}`),g?(L(),U()):(b(),k())):t.action==="selectionComplete"&&(g=!1,b(),k(),console.log("ğŸ›‘ ìƒí’ˆ ì„ íƒ ì™„ë£Œë¡œ ëª¨ë“œ ì¢…ë£Œ"))});window.onload=function(){const t=document.querySelector(".product-detail");if(!t)return;const e=document.createElement("button");e.innerText="ğŸ‘— ê°€ìƒ ì°©ìš©",e.style.cssText="position: absolute; top: 10px; right: 10px; background: #ff4081; color: white; padding: 8px; border-radius: 5px; cursor: pointer;",t.appendChild(e),e.addEventListener("click",()=>{var s,c,l;const n=((s=document.querySelector(".product-title"))==null?void 0:s.innerText)||"Unknown",o=((c=document.querySelector(".product-image img"))==null?void 0:c.src)||"",r=((l=document.querySelector(".product-price"))==null?void 0:l.innerText)||"Unknown",i=x(n);o?chrome.runtime.sendMessage({action:"tryOn",product:{name:n,image:o,price:r,category:i}}):alert("ìƒí’ˆ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")})};function L(){u=document.createElement("div"),u.style.position="fixed",u.style.top="0",u.style.left="0",u.style.width="100%",u.style.height="100%",u.style.backgroundColor="rgba(0, 0, 0, 0.3)",u.style.zIndex="10000",u.style.pointerEvents="none",document.body.appendChild(u)}function b(){u&&(u.remove(),u=null)}function U(){console.log("ğŸ–± ìƒí’ˆ í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€ë¨!"),document.addEventListener("click",v,!0),document.addEventListener("mouseover",C,!0),document.addEventListener("mouseout",q,!0)}function k(){console.log("ğŸ›‘ ìƒí’ˆ í´ë¦­ ì´ë²¤íŠ¸ ì œê±°ë¨!"),document.removeEventListener("click",v,!0),document.removeEventListener("mouseover",C,!0),document.removeEventListener("mouseout",q,!0)}function C(t){if(!g)return;const e=S(t.target);e&&(e.style.outline="2px solid #ff5500",t.preventDefault(),t.stopPropagation())}function q(t){if(!g)return;const e=S(t.target);e&&(e.style.outline="")}function S(t){let e=t,n=0;const o=10;for(;e&&e!==document.body&&n<o;){if(n++,e.classList&&e.classList.contains("god-item")||e.querySelector&&e.querySelector(".caption")&&e.querySelector("img")||e.classList&&(e.classList.contains("cunit_t232")||e.classList.contains("cunit_t")||e.classList.contains("item")))return e;const r=e.querySelector&&e.querySelector("img"),i=e.textContent&&(e.textContent.includes("ì›")||e.textContent.match(/\d{3,6}ì›/));if(r&&i&&e.children&&e.children.length>1)return e;e=e.parentElement}return null}function v(t){if(!g)return;console.log("ğŸ–± ìƒí’ˆ í´ë¦­ ê°ì§€ë¨!",t.target);const e=S(t.target);if(e){const n=T(e);chrome.runtime.sendMessage({action:"tryOn",product:n}),P(e,"âœ“ ìƒí’ˆì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤"),t.preventDefault(),t.stopPropagation()}}function A(t){var c,l,d,m,f,y;const e=t.querySelector("img");let n=e&&(e.src||e.getAttribute("data-src"))||"",o=((l=(c=t.querySelector(".name, .title, .prd_name"))==null?void 0:c.textContent)==null?void 0:l.trim())||"Unknown";if(o==="Unknown"){const a=document.querySelector(".gods-name#goodDtlTitle");a&&(o=a.textContent.trim())}let r=((m=(d=t.querySelector(".brand"))==null?void 0:d.textContent)==null?void 0:m.trim())||"Unknown";if(r==="Unknown"){const a=document.querySelectorAll("#brandLogo");if(a.length>0){const p=a[0];p.textContent?r=p.textContent.trim():p.getAttribute("alt")&&(r=p.getAttribute("alt").trim())}}let i="0";const s=t.querySelector(".price, .prc, .amount");if(s){const a=s.textContent,p=a.match(/íŒë§¤ê°€\s*([0-9,]+)/);if(p)i=p[1]+"ì›";else{const h=a.match(/([0-9,]+)ì›/);h&&(i=h[1]+"ì›")}}if(i==="0"||i==="0ì›"){const a=document.querySelector(".gods-price, .price");if(a){const h=a.textContent.match(/íŒë§¤ê°€\s*([0-9,]+)/);if(h){i=h[1]+"ì›";const w=document.querySelector(".preview-img .img-item.active img");w&&(n=w.src||w.getAttribute("data-src")||""),r=((y=(f=document.querySelector("h2.brand-name a"))==null?void 0:f.textContent)==null?void 0:y.trim())||"Unknown"}}}if(o==="Unknown"){const a=document.querySelector(".gods-name#goodDtlTitle");a&&(o=a.textContent.trim())}return{name:o,image:n,price:i,category:x(o),brand:r}}function E(t){var c,l;const e=t.querySelector("img");let n=e&&(e.src||e.getAttribute("data-src"))||"",o=((l=(c=t.querySelector(".text-etc_11px_semibold.line-clamp-1"))==null?void 0:c.textContent)==null?void 0:l.trim())||"Unknown",r=(e==null?void 0:e.getAttribute("alt"))||"Unknown";if(o!=="Unknown"&&r.startsWith(o))r=r.slice(o.length).trim();else if(o==="Unknown"){const d=r.match(/^([\u3131-\u314E\u314F-\u3163\uAC00-\uD7A3\s]+\([A-Z\s]+\))/);d&&(o=d[1],r=r.replace(o,"").trim())}let i="0";const s=t.querySelector("a[data-price]");return s&&(i=s.getAttribute("data-price")+"ì›"),{name:r,image:n,price:i,category:x(r),brand:o}}function I(t){var c,l,d,m;const e=t.querySelector("img");let n=e&&(e.src||e.getAttribute("data-src"))||"",o=((l=(c=document.querySelector("#pdp_product_name"))==null?void 0:c.textContent)==null?void 0:l.trim())||"Unknown",r=((m=(d=document.querySelector(".css-1dncbyk.eezztd84"))==null?void 0:d.textContent)==null?void 0:m.trim())||"Unknown",i="0";const s=document.querySelector("#pdp_product_price");return s&&(i=s.textContent.trim()),{name:o,image:n,price:i,category:x(o),brand:r}}function _(t){var s,c,l,d,m,f,y;const e=document.querySelector("picture");let n=((s=e==null?void 0:e.querySelector("img"))==null?void 0:s.src)||"",o=((l=(c=document.querySelector(".pdp_shop_info_row .css-gwr30y.e18f5kdz1"))==null?void 0:c.textContent)==null?void 0:l.trim())||"Unknown",r=((m=(d=document.querySelector(".pdp__title .css-1n8byw.e14n6e5u1"))==null?void 0:d.textContent)==null?void 0:m.trim())||"Unknown",i=((y=(f=document.querySelector(".css-no59fe.e1ovj4ty1"))==null?void 0:f.textContent)==null?void 0:y.trim())||"0";return{name:r,image:n,price:i,category:x(r),brand:o}}function T(t){const e=window.location.hostname;let n,o;return e.includes("ssfshop")?(n="SSF",o=A(t)):e.includes("musinsa")?(n="MUSINSA",o=E(t)):e.includes("29cm")?(n="29CM",o=I(t)):e.includes("zigzag")&&(n="ZIGZAG",o=_()),{...o,mall:n,url:window.location.href,maskOffset:o.category==="Lower"?100:0}}function x(t){const e=["pants","jeans","skirt","shorts","leggings","slacks","íŒ¬ì¸ ","ë°”ì§€","ì§„","ì²­ë°”ì§€","ìŠ¤ì»¤íŠ¸","ì¹˜ë§ˆ","ë ˆê¹…ìŠ¤","ìŠ¬ë™ìŠ¤","ìˆíŒ¬ì¸ ","ë°˜ë°”ì§€","ì‡¼ì¸ ","ì™€ì´ë“œíŒ¬ì¸ ","ì¡°ê±°íŒ¬ì¸ ","ì¹´ê³ íŒ¬ì¸ ","ë°ë‹˜"],n=["dress","gown","one-piece","onepiece","ë“œë ˆìŠ¤","ì›í”¼ìŠ¤","ê°€ìš´","ë¡±ì›í”¼ìŠ¤","ë¯¸ë‹ˆì›í”¼ìŠ¤","ë‹ˆíŠ¸ì›í”¼ìŠ¤"],o=["shirt","blouse","top","jacket","coat","cardigan","sweater","hoodie","sweatshirt","t-shirt","tee","ì…”ì¸ ","ë¸”ë¼ìš°ìŠ¤","íƒ‘","ìì¼“","ì½”íŠ¸","ê°€ë””ê±´","ìŠ¤ì›¨í„°","í›„ë“œ","ë§¨íˆ¬ë§¨","í‹°ì…”ì¸ ","ë‹ˆíŠ¸","ì í¼","íŒ¨ë”©","ì§‘ì—…","ë² ìŠ¤íŠ¸","ì¡°ë¼","í¬ë¡­","í¬ë¡­í‹°"],r=["shoes","sneakers","boots","sandals","loafers","heels","slippers","ì‹ ë°œ","ìš´ë™í™”","ìŠ¤ë‹ˆì»¤ì¦ˆ","ë¶€ì¸ ","ìƒŒë“¤","ë¡œí¼","í","ìŠ¬ë¦¬í¼","í”Œë«ìŠˆì¦ˆ","êµ¬ë‘"],i=["bag","purse","wallet","belt","hat","cap","scarf","necklace","earrings","bracelet","watch","sunglasses","glasses","ring","jewelry","ê°€ë°©","ì§€ê°‘","ë²¨íŠ¸","ëª¨ì","ìŠ¤ì¹´í”„","ëª©ê±¸ì´","ê·€ê±¸ì´","íŒ”ì°Œ","ì‹œê³„","ì„ ê¸€ë¼ìŠ¤","ì•ˆê²½","ë°˜ì§€","ì¥¬ì–¼ë¦¬","ì•…ì„¸ì„œë¦¬","ì•¡ì„¸ì„œë¦¬"],s=t.toLowerCase();return r.some(c=>s.includes(c))?"Shoes":i.some(c=>s.includes(c))?"Accessory":n.some(c=>s.includes(c))?"Dress":e.some(c=>s.includes(c))?"Lower":o.some(c=>s.includes(c))?"Upper":"Unknown"}function P(t,e){const n=document.createElement("div");n.textContent=e,n.style.position="fixed",n.style.top="20px",n.style.left="50%",n.style.transform="translateX(-50%)",n.style.backgroundColor="rgba(0, 0, 0, 0.6)",n.style.color="white",n.style.padding="10px 20px",n.style.borderRadius="5px",n.style.zIndex="100000",document.body.appendChild(n),t.style.outline="2px solid green",setTimeout(()=>{n.remove(),t.style.outline=""},2e3)}console.log("âœ… ìƒí’ˆ ì„ íƒ ê¸°ëŠ¥ ì¶”ê°€ ì™„ë£Œ!");
